# データベーススキーマ (Googleスプレッドシート)

このドキュメントは、プロジェクトで使用されるGoogleスプレッドシートの各シート（テーブル）の構造を定義します。

## 1. `Books` シート

サーバーに登録された書籍のマスターデータを管理します。

| カラム名        | データ型 | 説明                                                     |
| --------------- | -------- | -------------------------------------------------------- |
| `BookID`        | 文字列   | **[主キー]** Botが生成する一意のID (UUID)                |
| `ISBN`          | 文字列   | ISBN-13 または ISBN-10 (空の場合もあり)                  |
| `Title`         | 文字列   | 書籍のタイトル                                           |
| `Author`        | 文字列   | 著者名 (複数の場合はカンマ区切り)                        |
| `TotalPages`    | 数値     | 総ページ数                                               |
| `CoverImageURL` | 文字列   | 表紙画像のURL                                            |
| `Description`   | 文字列   | 書籍の概要                                               |
| `RegisteredBy`  | 文字列   | この本を登録したDiscordユーザーのID                      |
| `RegisteredAt`  | 文字列   | 登録日時 (ISO 8601形式のタイムスタンプ)                  |

## 2. `ReadingLogs` シート

ユーザーのすべての読書セッション（いつ、どれだけ読んだか）の履歴を記録します。このテーブルは追記専用です。

| カラム名    | データ型 | 説明                                                     |
| ----------- | -------- | -------------------------------------------------------- |
| `LogID`     | 文字列   | **[主キー]** Botが生成する一意のID (UUID)                |
| `BookID`    | 文字列   | **[外部キー]** `Books`シートの`BookID`を参照             |
| `UserID`    | 文字列   | 読書を記録したDiscordユーザーのID                        |
| `PageCount` | 数値     | この記録で読んだページ数（差分）                         |
| `LoggedAt`  | 文字列   | 記録日時 (ISO 8601形式のタイムスタンプ)                  |

## 3. `ReadingStatus` シート

ユーザーごと・書籍ごとの最新の読書状況を管理します。このシートは、Botの応答性能を向上させるためのビュー（サマリーテーブル）として機能します。

| カラム名        | データ型 | 説明                                                     |
| --------------- | -------- | -------------------------------------------------------- |
| `StatusID`      | 文字列   | **[主キー]** 一意のID (例: `UserID`と`BookID`の複合キー) |
| `UserID`        | 文字列   | **[外部キー]** ユーザーID                                |
| `BookID`        | 文字列   | **[外部キー]** `Books`シートの`BookID`を参照             |
| `CurrentPage`   | 数値     | 現在の読了ページ                                         |
| `Status`        | 文字列   | 読書状況 (例: "Reading", "Finished", "Want to Read")     |
| `LastUpdatedAt` | 文字列   | 最終更新日時 (ISO 8601形式のタイムスタンプ)              |
